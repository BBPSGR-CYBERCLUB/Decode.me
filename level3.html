<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Level 3 Access</title>
    <link rel="shortcut icon" href="./images/logo.png" type="image/x-icon">

    <style>

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            font-family: Arial, sans-serif;
            overflow: hidden;
            background-color: #000;
        }

        /* Flashbang animation */
        .flashbang {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 9999;
            animation: flashbang 0.8s ease-out forwards;
        }

        @keyframes flashbang {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.8;
                transform: scale(1.1);
            }
            100% {
                opacity: 0;
                transform: scale(1);
                visibility: hidden;
            }
        }

        .container {
            display: flex;
            height: 100vh;
        }

        .left {
            flex: 1;
            background: url("images/lvl2.png") no-repeat center center;
            background-size: cover;
        }

        .right {
            flex: 1;
            background-color: #111;
            color: #0f0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        h1 {
            font-family: 'Major Mono Display', monospace;
            margin-bottom: 30px;
            color: #0f0;
        }

        input[type="password"] {
            padding: 10px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            outline: none;
            width: 200px;
            text-align: center;
        }

        button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #0f0;
            color: #000;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
        }

        button:hover {
            background-color: #6f6;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Major+Mono+Display&display=swap" rel="stylesheet">
    <script>
        // Disable inspect tools
        document.oncontextmenu = () => false;
        document.onkeydown = (e) => {
            if (
                e.key === "F12" ||
                (e.ctrlKey && e.shiftKey && ['I', 'J', 'C'].includes(e.key.toUpperCase())) ||
                (e.ctrlKey && e.key.toLowerCase() === 'u')
            ) {
                e.preventDefault();
                return false;
            }
        };
    </script>
</head>
<body>
<div class="flashbang"></div>
<div class="container">
    <div class="left"></div>
    <div class="right">
        <h1>Solve the riddle.</h1>
        <audio src="level3/stego.wav" controls></audio>
        <i style="margin-bottom: 20px;"><button onclick="download_decrypt_file()">hint</button></i>
        <label for="pass" style="display: none">enter pwd</label> <!-- Label is hidden for accessibility, but not visible to users -->
        <input type="password" id="pass" placeholder="Password" />
        <button onclick="checkPassword()">Enter</button>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

<script>
    function checkPassword() {
        const input = document.getElementById("pass").value;
        const inputHash = CryptoJS.SHA512(input).toString(CryptoJS.enc.Hex);
        console.log(inputHash, input)
        const correct = "b109f3bbbc244eb82441917ed06d618b9008dd09b3befd1b5e07394c706a8bb980b1d7785e5976ec049b46df5f1326af5a2ea6d103fd07c95385ffab0cacbc86";
        if (inputHash == correct) {
            if (location.hostname === "localhost" || location.hostname === "127.0.0.1") {
                window.location.href = "level4.html";
            } else {
                window.location.href = "level4.html";
            }
        } else {
            alert("Incorrect password. Try again.");
        }
    }

    function download_decrypt_file(){
        window.location.href = "level3/decrypt.py";
    }
</script>
</body>
</html>